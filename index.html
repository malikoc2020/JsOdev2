<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style>
        .footer {
           position: fixed;
           left: 0;
           bottom: 0;
           width: 100%;
           /* background-color: red; */
           /* color: white; */
           text-align: center;
        }
            .ortalaTuruncu{
                background-color: orange;
                color: white;
            }

            #ulListe>li:nth-child(odd){
                background-color: rgb(255, 253, 251);
            }
            #ulListe>li:nth-child(even){
                background-color:rgb(235, 231, 231);
            }
            #ulListe>li:hover{
                background-color: grey;
            }
            .sagUst{
                position:absolute;
                top:0;
                right:0;
            }
        </style>
</head>
<body >
    <div  style="height: 30%; text-align: center; padding-top: 50px; padding-bottom: 50px; background-color: orange;">
        <img src="kodluyoruz.PNG" alt="logo">
        <p style="color:white;"> <strong>Yapılacaklar Listesi</strong></p>
        <div style="display: table; width: 50%; margin:auto; background-color: blue;">
            <div style="background-color: aquamarine; text-align: center; display: table-cell; width: 70%">
                <input id="Ekle" type="text" style="width: 100%;" placeholder="Bugün ne yapacaksın?">
            </div>
            <input id="btnEkle" type="button" style="width: 100%;" value="Ekle">
        </div>    
    </div>
    
    <div>
        <ul id="ulListe" style="width: 50%; margin:auto; list-style-type:none"></ul>
    </div>

    <div class="footer" >
        <p>© 2022</p>
      </div>



      <div id="toast" class="toast align-items-right sagUst" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="d-flex">
          <div id="toastBody" class="toast-body">
          <!-- Hello, world! This is a toast message. -->
         </div>
          <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
      </div>



      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    




      <script>
          var input = document.getElementById('Ekle');
          var buton = document.getElementById('btnEkle');
          var liste = document.getElementById('ulListe');
          var bildirim = document.getElementById('toast');
          var bildirimYazisi = document.getElementById('toastBody');
          var bsAlert = new bootstrap.Toast(bildirim);//inizialize it
          
     
          buton.addEventListener('click',fnEkle);

          fnGetLocalstorage();

          function fnEkle()
          {
              let text = input.value;
              if(text.trim() === ''){
                bildirimYazisi.innerHTML  = `Lütfen eklemek istediğiniz notu giriniz.`;
                bsAlert.show();//show it
              }else{
                var li = document.createElement("li");
                li.appendChild(document.createTextNode(text));

                var liBtn = document.createElement("a");
                liBtn.innerHTML = "x";
                liBtn.style.backgroundColor = 'Transparent';
                liBtn.style.float = "right";
                liBtn.style.paddingRight = "15px";
                liBtn.style.textDecoration = "none";
                liBtn.setAttribute("href","");
                liBtn.addEventListener("click",fnLiBtnClick);
                
                li.appendChild(liBtn);
                li.addEventListener("click",fnLiClick);

                liste.appendChild(li);
                input.value = '';
                //console.log('eklendi li olarak');
                //console.log(bildirim);
                //bildirim.toast('show');
                bildirimYazisi.innerHTML  = `${text} başarıyla eklendi.`;
                bsAlert.show();//show it
                fnSetLocalstorage();
              }
          }


          function fnLiBtnClick(event){
            event.preventDefault();
            let thisA = event.target;
            let thisLi = thisA.parentNode
            let thisUl = thisLi.parentNode

            let text = thisLi.innerText;
            thisUl.removeChild(thisLi);

            bildirimYazisi.innerHTML  = `${text} Silindi!`;
            bsAlert.show();//show it
            //console.log(thisA);
            //console.log(thisLi);
            //console.log(thisUl);
            fnSetLocalstorage();
          }

          function fnLiClick(event){
            let thisLi = event.target;
            let textDecoration = thisLi.style.textDecoration;
            if(textDecoration == "line-through")
            {
                // thisLi.style.textDecoration = "none";
                thisLi.removeAttribute("style");
            }else{
                thisLi.style.textDecoration = "line-through";
                thisLi.style.backgroundColor = "SteelBlue"
            }
            fnSetLocalstorage();
            
          }

          function fnGetLocalstorage(){
            
            let deger = JSON.parse(window.localStorage.getItem("ulli"));
            console.log("fnGetLocalstorage tetiklendi. ");
            console.log(deger);
            liste.innerHTML = deger;


            let liListesi = liste.getElementsByTagName("li");
            for(let i = 0 ; i <liListesi.length; i++)
            {
                liListesi[i].addEventListener("click", fnLiClick);
                liListesi[i].getElementsByTagName("a")[0].addEventListener("click", fnLiBtnClick);
            }
             



          }
          function fnSetLocalstorage(){
            let deger = JSON.stringify(liste.innerHTML);
            console.log("fnSetLocalstorage tetiklendi. ");
            console.log(deger);
            window.localStorage.setItem("ulli",deger);

            }
      </script>
</body>
</html>